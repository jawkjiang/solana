# 前端接口文档v0.1 0326
## 登录接口
### URL
`POST /login`
### 请求参数
|参数名|类型|必填|描述|
|:--:|:--:|:--:|:--:|
|userAddress|string|是|用户地址|
|userToken|string|是|用户识别码|
### 请求示例
```
{
    userAddress: "xxxxxxxxxxxxxxxx",
    userToken: "xxxxxxxx"
}
```
### 响应参数
|参数名|类型|描述|
|:--:|:--:|:--:|
|userAddress|string|用户地址|
|userToken|string|用户识别码|
|asset|string|资产名（返回且仅返回SOL和token，即积分）|
|quantity|number|资产持有数量|
### 响应示例
```
{
    "code": 0,
    "msg": "OK",
    "data": {
        "userAddress": "xxxxxxxxxxxxxxxx",
        "userToken": "xxxxxxxx",
        "assets": [
            {
                "asset": "SOL",
                "quantity": 0.86
            },
            {
                "asset": "token",
                "quantity": 186,
            }
        ]
        // assets list定长且为2
    }
}
```

## 商品展示接口
### URL
`GET /goods`
### 请求参数
|参数名|类型|必填|描述|
|:--:|:--:|:--:|:--:|
### 请求示例
### 响应参数
|参数名|类型|描述|
|:--:|:--:|:--:|
|NFTId|string|商品ID|
|name|string|商品名|
|URL|string|商品图片链接|
|price|number|商品价格|
|description|string|商品描述|
### 响应示例
```
{
    "code": 0,
    "msg": "OK",
    "data": [
        {
            "NFTId": "000001",
            "name": "coalTicket02",
            "URL": "media/pictures/000001.png"
            "price": 0.086,
            "description": "Published by Metana. Can be used to purchase a cup of cola in real stores."
        },
        {
            "NFTId": "000002",
            "name": "hamburgerTicket01",
            "URL": "media/pictures/000002.png"
            "price": 0.154,
            "description": "Published by Metana. Can be used to purchase a giant hamburger in real stores."
        },
        {
            "NFTId": "000003",
            "name": "coffeeTicket01",
            "URL": "media/pictures/000003.png"
            "price": 0.112,
            "description": ""
        }
    ]
}
```

## 交易路径接口
### URL
`POST /routes`
### 请求参数
|参数名|类型|必填|描述|
|:--:|:--:|:--:|:--:|
|NFTId|string|是|商品ID|
|quantity|number|是|购买数量|
### 请求示例
```
[
    {
        "NFTId": "000002",
        "quantity": 2
    },
    {
        "NFTId": "000004",
        "quantity": 7
    }
]
```
### 响应参数
|参数名|类型|描述|
|:--:|:--:|:--:|
|route|number|支付路径索引|
|totalRawPrice|number|路径原始价格|
|tokenNumber|number|路径消耗积分数量|
|tokenToBuy|number|路径需要购买的积分数量|
|priceBuyingToken|number|路径花费在积分池购买积分的价格|
|totalDiscountPrice|number|路径折扣价格|
|totalPrice|number|路径折后价格|

route为0时，为纯sol支付；
route为1时，为sol和用户账户内积分配合支付；
route为2时，为规则内最大程度使用积分的条件下，sol、用户账户内积分和积分池购买积分配合支付。 

下面的示例是在用户账户内有1000积分，每100积分在商品中抵扣0.1元，每个商品抵扣上限为600积分，每100积分在积分池中为0.05元的情况。

### 响应示例
```
{
    "code": 0,
    "msg": "OK",
    "data": [
        {
            "route": 0,
            "totalRawPrice": 18.765,
            "totalToken": 0,
            "tokenToBuy": 0,
            "priceBuyingToken": 0,
            "totalDiscountPrice": 0,
            "totalPrice": 18.765
        },
        {
            "route": 1,
            "totalRawPrice": 18.765,
            "totalToken": 1000,
            "tokenToBuy": 0,
            "priceBuyingToken": 0,
            "totalDiscountPrice": 1,
            "totalPrice": 17.765
        },
        {
            "route": 2,
            "totalRawPrice": 18.765,
            "totalToken": 1200,
            "tokenToBuy": 200,
            "priceBuyingToken": 0.1,
            "totalDiscountPrice": 1.1,
            "totalPrice": 17.665
        }
    ]
}
```
### 错误码
`400: 余额不足。`


## 交易信息保存接口
### URL
`POST /save`
### 请求参数
|参数名|类型|必填|描述|
|:--:|:--:|:--:|:--:|
|userAddress|string|是|用户地址|
|NFTId|string|是|交易商品ID|
|quantity|number|是|交易数量|
|price|number|是|交易价格|
|token|number|是|使用积分数量|
### 请求示例
```
{
    "userAddress": "xxxxxxxxxxxxxxxx",
    "NFTId": "000001",
    "quantity": 1,
    "price": 18.77,
    "token": 523
}
```
### 响应参数
|参数名|类型|描述|
|:--:|:--:|:--:|
### 响应示例
```
{
    "code": 0,
    "msg": "OK"
}
```

若单次交易多个商品，请多次调用本接口。